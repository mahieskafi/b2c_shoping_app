Index: app/src/main/java/com/srp/ewayspanel/ui/shopcart/confirm/ShopCartPaymentMethodView.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.srp.ewayspanel.ui.shopcart.confirm\r\n\r\nimport android.content.Context\r\nimport android.graphics.drawable.Drawable\r\nimport android.text.Editable\r\nimport android.text.TextWatcher\r\nimport android.util.AttributeSet\r\nimport android.util.TypedValue\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.View.OnClickListener\r\nimport android.widget.CheckBox\r\nimport android.widget.CompoundButton\r\nimport android.widget.ImageView\r\nimport android.widget.TextView\r\nimport androidx.appcompat.widget.AppCompatTextView\r\nimport androidx.appcompat.widget.SwitchCompat\r\nimport androidx.cardview.widget.CardView\r\nimport androidx.core.content.res.ResourcesCompat\r\nimport com.google.android.material.button.MaterialButton\r\nimport com.srp.eways.model.deposit.Bank\r\nimport com.srp.eways.ui.view.button.ButtonElement\r\nimport com.srp.eways.ui.view.input.InputElement\r\nimport com.srp.eways.util.Utils\r\nimport com.srp.ewayspanel.R\r\nimport com.srp.ewayspanel.di.DI\r\nimport com.srp.ewayspanel.ui.shopcart.ShopCartFragment\r\nimport com.yashoid.inputformatter.InputFormatter\r\nimport com.yashoid.sequencelayout.SequenceLayout\r\n\r\n\r\n/**\r\n * Created by ErfanG on 1/1/2020.\r\n */\r\nclass ShopCartPaymentMethodView : SequenceLayout {\r\n\r\n\r\n    interface SubmitDiscountCode {\r\n        fun onSubmitCode(discountCode: String)\r\n\r\n        fun onCodeCleared()\r\n    }\r\n\r\n    interface PaymentItemsSelectedListener {\r\n        fun onItemSelected(item: Int)\r\n    }\r\n\r\n    interface BankContentListener {\r\n        fun onBankChanged(bank: Bank)\r\n    }\r\n\r\n    private val resources = DI.getABResources()\r\n\r\n    //Views\r\n    private val mDepositTitle: AppCompatTextView\r\n    private val mDepositValueDescription: AppCompatTextView\r\n    private val mDepositValue: AppCompatTextView\r\n    private val mSwitchText: AppCompatTextView\r\n    private val mSwitchBox: SwitchCompat\r\n\r\n    private val mDiscountText: TextView\r\n    private val mDiscountCode: InputElement\r\n    private val mSubmitDiscount: ButtonElement\r\n    private var mDiscountCheckBox: CheckBox\r\n    private val mDiscoountChecked: ImageView\r\n    private val mPayTitle: TextView\r\n\r\n    private val mDiscountContainer: CardView\r\n    private val mPaymentContainer: CardView\r\n\r\n    private lateinit var mBankContentListener: BankContentListener\r\n    private lateinit var mAction: SubmitDiscountCode\r\n\r\n    private var mIsDepositEnough: Boolean = true\r\n    private var mItemsSelectedListener: PaymentItemsSelectedListener? = null\r\n\r\n    constructor(context: Context) : super(context)\r\n    constructor(context: Context, attributeSet: AttributeSet) : super(context, attributeSet)\r\n    constructor(context: Context, attributeSet: AttributeSet, defAttrSet: Int) : super(context, attributeSet, defAttrSet)\r\n\r\n    init {\r\n\r\n        LayoutInflater.from(context).inflate(R.layout.shop_cart_payment_method_item, this, true)\r\n\r\n        mDepositTitle = findViewById(R.id.deposit_title)\r\n        mDepositValueDescription = findViewById(R.id.tv_value_description)\r\n        mDepositValue = findViewById(R.id.tv_deposit_value)\r\n        mSwitchText = findViewById(R.id.switch_title)\r\n        mSwitchBox = findViewById(R.id.switch_box)\r\n\r\n        mDiscountText = findViewById(R.id.discount_text)\r\n        mDiscountCode = findViewById(R.id.discount_code_value)\r\n        mSubmitDiscount = findViewById(R.id.submit_discount_code)\r\n        mDiscountCheckBox = findViewById(R.id.discount_checkbox)\r\n        mDiscoountChecked = findViewById(R.id.discount_checked)\r\n        mPayTitle = findViewById(R.id.pay_title_text)\r\n\r\n        mDiscountContainer = findViewById(R.id.discount_container)\r\n        mPaymentContainer = findViewById(R.id.deposit_container)\r\n\r\n        addSequences(R.xml.sequences_shop_cart_payment_method_item)\r\n\r\n        mDiscountCheckBox.isChecked = false\r\n\r\n        mDiscountContainer.background = resources.getDrawable(R.drawable.address_detail_card_backgound)\r\n        mPaymentContainer.background = resources.getDrawable(R.drawable.address_detail_card_backgound)\r\n\r\n        val mainTypeface = ResourcesCompat.getFont(context, R.font.iran_yekan)\r\n        mPayTitle.setTextSize(TypedValue.COMPLEX_UNIT_PX, resources.getDimenPixelSize(R.dimen.shop_cart_payment_method_item_radio_text_size).toFloat())\r\n        mPayTitle.setTextColor(resources.getColor(R.color.shop_cart_payment_method_item_radio_message_color))\r\n        mPayTitle.text = resources.getString(R.string.shop_cart_payment_method_item_pay_radio_text)\r\n        mPayTitle.typeface = mainTypeface\r\n\r\n        val listener = CompoundButton.OnCheckedChangeListener { switchView, isChecked ->\r\n            when {\r\n                isChecked -> {\r\n                    mItemsSelectedListener?.onItemSelected(ShopCartFragment.SHOP_CART_PAY_DEPOSIT)\r\n                }\r\n                else -> {\r\n                    mItemsSelectedListener?.onItemSelected(ShopCartFragment.SHOP_CART_PAY_DARGAH)\r\n                }\r\n            }\r\n        }\r\n\r\n        mSwitchBox.setOnCheckedChangeListener(listener)\r\n\r\n        mSwitchBox.setOnClickListener {\r\n            mSwitchBox.setOnCheckedChangeListener(listener)\r\n        }\r\n\r\n        //region third row\r\n        mDiscountText.text = resources.getString(R.string.shop_cart_payment_method_item_discount_text)\r\n        mDiscountText.setTextColor(resources.getColor(R.color.shop_cart_payment_method_item_discount_color))\r\n        mDiscountText.setTextSize(TypedValue.COMPLEX_UNIT_PX, resources.getDimenPixelSize(R.dimen.shop_cart_payment_method_item_discount_size).toFloat())\r\n        mDiscountText.typeface = ResourcesCompat.getFont(context, R.font.iran_yekan_light)\r\n\r\n        mDiscountCode.background = resources.getDrawable(R.drawable.shop_cart_payment_method_item_discount_code)\r\n        mDiscountCode.setTextColor(resources.getColor(R.color.shop_cart_payment_method_item_discount_code_color))\r\n        mDiscountCode.setHint(resources.getString(R.string.shop_cart_payment_method_item_discount_hint))\r\n        mDiscountCode.setTextSize(resources.getDimenPixelSize(R.dimen.shop_cart_payment_method_item_discount_code_size).toFloat())\r\n        mDiscountCode.setTypeFace(ResourcesCompat.getFont(context, R.font.iran_yekan_light)!!)\r\n        mDiscountCode.getEditText().addTextChangedListener(InputFormatter(Utils.PersianNumberFormatter))\r\n        mDiscountCode.getEditText().addTextChangedListener(object : TextWatcher {\r\n            override fun afterTextChanged(s: Editable?) {\r\n                if (!s.isNullOrEmpty()) {\r\n                    mSubmitDiscount.setEnable(true)\r\n                } else {\r\n                    mSubmitDiscount.setEnable(false)\r\n\r\n                    if (::mAction.isInitialized) {\r\n                        mAction.onCodeCleared()\r\n                    }\r\n                }\r\n            }\r\n\r\n            override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {\r\n            }\r\n\r\n            override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {\r\n            }\r\n\r\n        })\r\n\r\n        mSubmitDiscount.setText(resources.getString(R.string.shop_cart_payment_method_item_submit_discount))\r\n        mSubmitDiscount.setTextTypeFace(ResourcesCompat.getFont(context, R.font.iran_yekan)!!)\r\n        mSubmitDiscount.setTextSize(resources.getDimenPixelSize(R.dimen.shop_cart_payment_method_item_submit_discount_text_size).toFloat())\r\n        mSubmitDiscount.setTextColor(resources.getColor(R.color.shop_cart_payment_method_item_submit_discount_text_color))\r\n        mSubmitDiscount.setEnabledBackground(resources.getDrawable(R.drawable.shop_cart_payment_method_item_submit_enable_background))\r\n        mSubmitDiscount.setDisableBackground(resources.getDrawable(R.drawable.shop_cart_payment_method_item_submit_enable_background))\r\n        mSubmitDiscount.setLoadingColorFilter(resources.getColor(R.color.shop_cart_payment_method_item_submit_discount_text_color))\r\n        mSubmitDiscount.hasIcon(false)\r\n        mSubmitDiscount.setEnable(true)\r\n        //endregion\r\n\r\n\r\n        mDiscountCheckBox.setOnCheckedChangeListener { buttonView, isChecked ->\r\n            if (mDiscountCheckBox.isChecked) {\r\n                mDiscoountChecked.visibility = VISIBLE\r\n                mSubmitDiscount.visibility = VISIBLE\r\n                mDiscountCode.visibility = VISIBLE\r\n\r\n                mDiscountText.setTextColor(resources.getColor(R.color.shop_cart_payment_method_item_discount_color))\r\n            } else {\r\n                mDiscoountChecked.visibility = INVISIBLE\r\n                mSubmitDiscount.visibility = GONE\r\n                mDiscountCode.visibility = GONE\r\n\r\n                mDiscountText.setTextColor(resources.getColor(R.color.shop_cart_payment_method_item_discount_color_unchecked))\r\n            }\r\n        }\r\n\r\n        mDepositTitle.setTextColor(resources.getColor(R.color.shop_cart_payment_method_deposit_color))\r\n        mDepositTitle.setTextSize(TypedValue.COMPLEX_UNIT_PX, resources.getDimenPixelSize(R.dimen.shop_cart_payment_method_deposit_size).toFloat())\r\n        mDepositTitle.typeface = ResourcesCompat.getFont(context, R.font.iran_yekan)\r\n        mDepositTitle.text = resources.getString(R.string.shop_cart_deposit_title)\r\n\r\n        mDepositValue.setTextColor(resources.getColor(R.color.shop_cart_payment_method_deposit_color))\r\n        mDepositValue.setTextSize(TypedValue.COMPLEX_UNIT_PX, resources.getDimenPixelSize(R.dimen.shop_cart_payment_method_item_deposit_message_text_size).toFloat())\r\n        mDepositValue.typeface = ResourcesCompat.getFont(context, R.font.iran_yekan_bold)\r\n\r\n        mDepositValueDescription.setTextColor(resources.getColor(R.color.shop_cart_payment_method_deposit_color))\r\n        mDepositValueDescription.setTextSize(TypedValue.COMPLEX_UNIT_PX, resources.getDimenPixelSize(R.dimen.shop_cart_payment_method_deposit_size).toFloat())\r\n        mDepositValueDescription.typeface = ResourcesCompat.getFont(context, R.font.iran_yekan)\r\n        mDepositValueDescription.text = resources.getString(R.string.rial)\r\n\r\n        mSwitchText.setTextColor(resources.getColor(R.color.shop_cart_payment_method_deposit_color))\r\n        mSwitchText.setTextSize(TypedValue.COMPLEX_UNIT_PX, resources.getDimenPixelSize(R.dimen.shop_cart_payment_method_switch_text_size).toFloat())\r\n        mSwitchText.typeface = ResourcesCompat.getFont(context, R.font.iran_yekan)\r\n        mSwitchText.text = resources.getString(R.string.shop_cart_switch_title)\r\n\r\n\r\n    }\r\n\r\n\r\n    fun setDiscountCodeAction(action: SubmitDiscountCode) {\r\n\r\n        mAction = action\r\n\r\n        mSubmitDiscount.setClickListener(OnClickListener {\r\n            if (mDiscountCode.getText().isNotEmpty()) {\r\n                mAction.onSubmitCode(Utils.toEnglishNumber(mDiscountCode.getText().toString()))\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    fun setOnPayItemsClicked(listener: PaymentItemsSelectedListener) {\r\n\r\n        mItemsSelectedListener = listener\r\n    }\r\n\r\n    fun setAddDepositClickListener(action: OnClickListener) {\r\n\r\n//        mChooseIncreasDeposit.setOnClickListener(action)\r\n    }\r\n\r\n    fun setDepositValue(deposit: Long) {\r\n        mDepositValue.text = Utils.toPersianPriceNumber(deposit)\r\n    }\r\n\r\n    fun setSubmitButtonLoadingVisibility(visibility: Int) {\r\n        mSubmitDiscount.setLoadingVisibility(visibility = visibility)\r\n    }\r\n\r\n//    fun setBank(bankList: List<Bank>) {\r\n//        if (contentView.getmBankViews().isEmpty()) {\r\n//            contentView.removeAllViews()\r\n//            contentView.setBankList(bankList)\r\n////            Toast.makeText(context,\"1111\",Toast.LENGTH_SHORT).show()\r\n//        }\r\n//\r\n//\r\n//    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/srp/ewayspanel/ui/shopcart/confirm/ShopCartPaymentMethodView.kt	(revision eb40f0647cb2312e7529c9739ccb9946bf822593)
+++ app/src/main/java/com/srp/ewayspanel/ui/shopcart/confirm/ShopCartPaymentMethodView.kt	(date 1618230058273)
@@ -151,12 +151,16 @@
                         mAction.onCodeCleared()
                     }
                 }
+                if ((s >= 'a' && s <= 'z') || (s >= 'A' && s <= 'Z')) {
+                    //english letter
+                }
             }
 
             override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {
             }
 
-            override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {
+            override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {
+
             }
 
         })
